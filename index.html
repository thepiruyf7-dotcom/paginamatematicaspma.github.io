<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Curso de Matem√°ticas</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-indigo-100 to-purple-200 min-h-screen p-10">

<!-- ====== MEN√ö PRINCIPAL ====== -->
<div id="menu" class="max-w-6xl mx-auto p-8 rounded-3xl shadow-2xl border border-indigo-200 bg-gradient-to-br from-indigo-50 to-purple-100 relative overflow-hidden">

  <div class="absolute inset-0 bg-[url('https://concepto.de/wp-content/uploads/2013/08/matematicas-e1551990322160-800x399.jpg')] bg-repeat opacity-5 animate-[moveBackground_40s_linear_infinite]"></div>

  <style>
    @keyframes moveBackground {
      0% { background-position: 0 0; }
      100% { background-position: 800px 800px; }
    }
  </style>

  <div class="relative z-10">

    <header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
      <div class="text-center md:text-left">
        <h1 class="text-4xl font-extrabold text-indigo-800 drop-shadow-[0_4px_6px_rgba(0,0,0,0.2)] tracking-wide">
          üéì Curso Interactivo de Matem√°ticas
        </h1>
        <p class="text-lg text-indigo-700 mt-2">
          Bienvenido, 
          <span id="userName" class="font-semibold underline decoration-yellow-400 underline-offset-4"></span>!
        </p>
      </div>

      <!-- Bot√≥n para volver al curso de l√≥gica -->
      <button onclick="volverLogica()" 
        class="bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold px-6 py-3 rounded-2xl shadow-lg transition transform hover:-translate-y-1 hover:scale-105 duration-200">
        ‚¨Ö Ir al Curso de L√≥gica
      </button>
    </header>

    <!-- Bot√≥n principal -->
    <div class="text-center my-10">
      <button onclick="iniciarMatematicas()" 
        class="group bg-gradient-to-r from-green-300 via-green-400 to-green-500 hover:from-green-400 hover:to-green-600 text-indigo-900 font-bold px-10 py-5 rounded-3xl text-2xl shadow-xl hover:shadow-2xl transition transform hover:-translate-y-1 hover:scale-105 duration-200 flex items-center justify-center mx-auto gap-3">
        üìò <span class="group-hover:translate-x-1 transition-transform">Iniciar Curso: Matem√°ticas</span>
      </button>

      <div class="mt-6">
        <p class="text-indigo-700 text-lg mb-2">
          Progreso total:
          <span id="progressText" class="font-bold text-yellow-600">0%</span>
        </p>

        <div class="w-72 mx-auto bg-indigo-200/40 rounded-full h-4 overflow-hidden shadow-inner backdrop-blur-sm">
          <div id="progressBar" class="bg-yellow-400 h-4 w-0 transition-all duration-700 ease-out rounded-full"></div>
        </div>
      </div>

    </div>

  </div>
</div>



<!-- ===================== LISTA DE CAP√çTULOS ===================== -->
<div id="curso" class="hidden max-w-4xl mx-auto bg-white p-10 mt-10 rounded-3xl shadow-xl">

  <button onclick="volverMenu()" class="text-blue-600 mb-6 hover:underline">
    ‚¨Ö Volver al men√∫
  </button>

  <h2 class="text-3xl font-bold text-green-700 mb-6 text-center">
    Curso de Matem√°ticas
  </h2>

  <div id="listaCapitulos" class="grid md:grid-cols-2 gap-6"></div>
</div>



<!-- ===================== CAP√çTULO ===================== -->
<div id="capitulo" class="hidden max-w-4xl mx-auto bg-white p-10 mt-10 rounded-3xl shadow-xl">

  <button onclick="volverCurso()" class="text-green-600 mb-6 hover:underline">
    ‚¨Ö Volver al curso
  </button>

  <h2 id="tituloCapitulo" class="text-3xl font-bold text-green-700 mb-4"></h2>

  <div id="contenidoCapitulo" class="prose"></div>

  <div class="text-center mt-6">
    <button onclick="mostrarPrueba()" 
      class="bg-green-600 text-white px-6 py-3 rounded-xl shadow hover:bg-green-700">
      üß† Iniciar Prueba
    </button>
  </div>

  <div id="prueba" class="hidden mt-8 border-t pt-4">
    <h3 class="text-xl font-semibold mb-4">Prueba del cap√≠tulo</h3>

    <div id="quiz"></div>

    <button onclick="finalizarPrueba()"
      class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700">
      Finalizar
    </button>

    <button onclick="terminarCapitulo()" 
      class="bg-indigo-600 text-white px-6 py-3 rounded-2xl shadow hover:bg-indigo-700 transition mt-4">
      ‚úî Terminar Cap√≠tulo
    </button>

    <p id="resultado" class="mt-4 text-center font-bold text-lg"></p>
  </div>

</div>




<!-- ============================================================
   SCRIPT COMPLETO CON TODAS LAS PREGUNTAS MEJORADAS
============================================================ -->
<script>

let matematicas = [

/* ============================================================
   CAP√çTULO 0 ‚Äî √ÅLGEBRA UNIVERSITARIA (5 preguntas)
============================================================ */
{
  id: 0,
  title: "√Ålgebra Universitaria",
  theory: `
    <h3 class="text-xl font-bold">√Ålgebra Universitaria</h3>
    <p>
      El √°lgebra estudia patrones, relaciones y estructuras mediante s√≠mbolos,
      permitiendo modelar y resolver problemas reales.
    </p>

    <div class="mt-4">
      <h4 class="text-lg font-semibold mb-2">üì∫ Video del cap√≠tulo</h4>
      <div class="aspect-w-16 aspect-h-9">
        <iframe 
          class="w-full h-64 rounded-xl shadow-lg"
          src="https://www.youtube.com/embed/_6uyQISZvBc?start=84"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  `,
  questions: [
    // Nuevas basadas en video
    { 
      q: "Seg√∫n el video, ¬øqu√© es el √°lgebra?",
      a: ["Un m√©todo para medir √°reas", "El estudio de relaciones usando s√≠mbolos", "Una rama de la geometr√≠a"],
      correct: 1
    },
    { 
      q: "El video menciona que una ecuaci√≥n es:",
      a: ["Una operaci√≥n sin soluci√≥n", "Una comparaci√≥n entre expresiones con un igual", "Una f√≥rmula fija"],
      correct: 1
    },
    { 
      q: "¬øCu√°l es el objetivo del √°lgebra seg√∫n el video?",
      a: ["Memorizar f√≥rmulas", "Resolver problemas mediante ecuaciones", "Aprender trigonometr√≠a"],
      correct: 1
    },

    // Tus preguntas originales
    { q:"Resolver la ecuaci√≥n: 3x + 6 = 12", a:["x = 1","x = 2","x = 4"], correct:1 },
    { q:"Factorice: x¬≤ ‚àí 9", a:["(x+3)(x-3)","(x-9)(x+1)","x(x‚àí9)"], correct:0 }
  ]
},



/* ============================================================
   CAP√çTULO 1 ‚Äî FUNCIONES Y GR√ÅFICAS (5 preguntas)
============================================================ */
{
  id: 1,
  title: "Funciones y Gr√°ficas",
  theory: `
    <h3 class="text-xl font-bold">Funciones y sus Representaciones</h3>
    <p>
      Una funci√≥n asigna a cada valor de entrada un √∫nico valor de salida.
    </p>

    <div class="mt-4">
      <h4 class="text-lg font-semibold mb-2">üì∫ Video del cap√≠tulo</h4>
      <div class="aspect-w-16 aspect-h-9">
        <iframe 
          class="w-full h-64 rounded-xl shadow-lg"
          src="https://www.youtube.com/embed/ZCOQFFtGY3I?start=8"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  `,
  questions: [
    // Nuevas del video
    {
      q: "¬øQu√© prueba se usa para saber si una gr√°fica es funci√≥n?",
      a: ["Prueba del eje horizontal", "Prueba de la recta vertical", "Prueba de la simetr√≠a"],
      correct: 1
    },
    {
      q: "Una gr√°fica representa:",
      a: ["Valores m√°ximos √∫nicamente", "Las parejas (x, y) que cumplen la funci√≥n", "Solo n√∫meros enteros"],
      correct: 1
    },
    {
      q: "Seg√∫n el video, una funci√≥n es:",
      a: ["Una tabla", "Una correspondencia √∫nica entre entradas y salidas", "Una ecuaci√≥n siempre lineal"],
      correct: 1
    },

    // Tus originales
    { q:"La funci√≥n f(x) = 2x + 3 es:", a:["Lineal","Cuadr√°tica","Exponencial"], correct:0 },
    { q:"El dominio de una funci√≥n es:", a:["Sus valores de salida","Sus valores de entrada","Su pendiente"], correct:1 }
  ]
},



/* ============================================================
   CAP√çTULO 2 ‚Äî TRIGONOMETR√çA (7 preguntas)
============================================================ */
{
  id: 2,
  title: "Trigonometr√≠a",
  theory: `
    <h3 class="text-xl font-bold">Trigonometr√≠a B√°sica</h3>
    <p>Relaciones entre lados y √°ngulos de un tri√°ngulo rect√°ngulo.</p>

    <div class="mt-4">
      <h4 class="text-lg font-semibold mb-2">üì∫ Video recomendado</h4>
      <div class="aspect-w-16 aspect-h-9">
        <iframe 
          class="w-full h-64 rounded-xl shadow-lg"
          src="https://www.youtube.com/embed/ZyLz5SUMzNY?start=27"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  `,
  questions: [
    // Nuevas del video
    {
      q: "¬øCu√°l es la raz√≥n trigonom√©trica opuesto/hipotenusa?",
      a: ["Seno", "Coseno", "Tangente"],
      correct: 0
    },
    {
      q: "¬øCu√°l es adyacente/hipotenusa?",
      a: ["Seno", "Coseno", "Tangente"],
      correct: 1
    },
    {
      q: "La tangente es:",
      a: ["opuesto/hipotenusa", "adyacente/opuesto", "opuesto/adyacente"],
      correct: 2
    },
    {
      q: "¬øQu√© tipo de tri√°ngulo se usa en el video?",
      a: ["Is√≥sceles", "Rect√°ngulo", "Escaleno"],
      correct: 1
    },
    {
      q: "Seg√∫n el video, 180¬∞ equivalen a:",
      a: ["œÄ rad", "2œÄ rad", "œÄ/2 rad"],
      correct: 0
    },

    // Tus originales
    { q:"sin(Œ∏) se define como:", a:["opuesto/hipotenusa","adyacente/hipotenusa","opuesto/adyacente"], correct:0 },
    { q:"œÄ radianes equivalen a:", a:["90¬∞","180¬∞","360¬∞"], correct:1 }
  ]
},



/* ============================================================
   CAP√çTULO 3 ‚Äî C√ÅLCULO DIFERENCIAL (6 preguntas)
============================================================ */
{
  id: 3,
  title: "C√°lculo Diferencial",
  theory: `
    <h3 class="text-xl font-bold">Introducci√≥n al C√°lculo Diferencial</h3>
    <p>La derivada mide el cambio instant√°neo de una funci√≥n.</p>

    <div class="mt-4">
      <h4 class="text-lg font-semibold mb-2">üì∫ Video recomendado</h4>
      <div class="aspect-w-16 aspect-h-9">
        <iframe 
          class="w-full h-64 rounded-xl shadow-lg"
          src="https://www.youtube.com/embed/ZSYQ13iMbYA?start=4"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  `,
  questions: [
    // Nuevas del video
    {
      q: "¬øQu√© representa la derivada?",
      a: ["√Årea", "Pendiente de la tangente", "Longitud de un arco"],
      correct: 1
    },
    {
      q: "La derivada surge del l√≠mite cuando h ‚Üí",
      a: ["‚àû", "0", "1"],
      correct: 1
    },
    {
      q: "La recta tangente describe:",
      a: ["La variaci√≥n local de la funci√≥n", "El √°rea total", "Su m√°ximo absoluto"],
      correct: 0
    },
    {
      q: "La derivada indica:",
      a: ["Promedio de valores", "Tasa instant√°nea de cambio", "Simetr√≠a"],
      correct: 1
    },

    // Tus originales
    { q:"La derivada mide:", a:["√Årea bajo la curva","Cambio instant√°neo","Longitud de arco"], correct:1 },
    { q:"La derivada de x¬≤ es:", a:["x","2x","x¬≤"], correct:1 }
  ]
},



/* ============================================================
   CAP√çTULO 4 ‚Äî C√ÅLCULO INTEGRAL (6 preguntas)
============================================================ */
{
  id: 4,
  title: "C√°lculo Integral",
  theory: `
    <h3 class="text-xl font-bold">Introducci√≥n al C√°lculo Integral</h3>
    <p>La integral estudia acumulaci√≥n y √°rea bajo la curva.</p>

    <div class="mt-4">
      <h4 class="text-lg font-semibold mb-2">üì∫ Video recomendado</h4>
      <div class="aspect-w-16 aspect-h-9">
        <iframe 
          class="w-full h-64 rounded-xl shadow-lg"
          src="https://www.youtube.com/embed/IaQcGZdadhc?start=35"
          allowfullscreen>
        </iframe>
      </div>
    </div>
  `,
  questions: [
    // Nuevas del video
    {
      q: "Geom√©tricamente, la integral representa:",
      a: ["Pendiente", "√Årea bajo la curva", "Longitud de arco"],
      correct: 1
    },
    {
      q: "Una integral definida requiere:",
      a: ["L√≠mites de integraci√≥n", "Una derivada", "Un tri√°ngulo"],
      correct: 0
    },
    {
      q: "Integrar consiste en:",
      a: ["Restar cantidades", "Sumar infinitesimales", "Medir √°ngulos"],
      correct: 1
    },
    {
      q: "El Teorema Fundamental del C√°lculo relaciona:",
      a: ["Derivadas e integrales", "√Åreas y vol√∫menes", "√Ångulos y arcos"],
      correct: 0
    },

    // Tus originales
    { q:"La integral representa:", a:["√Ångulo entre curvas","√Årea bajo la curva","Pendiente de la recta"], correct:1 },
    { q:"La integral de x es:", a:["x¬≤/2 + C","1/x + C","2x + C"], correct:0 }
  ]
}

];



/* ============================================================
   SISTEMA DEL CURSO (NAvegaci√≥n, Pruebas, Progreso)
============================================================ */

let cursoActual = matematicas;
let capituloActual = null;

function iniciarMatematicas() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("curso").classList.remove("hidden");

  let lista = document.getElementById("listaCapitulos");
  lista.innerHTML = "";

  cursoActual.forEach(cap => {
    lista.innerHTML += `
      <div onclick="abrirCapitulo(${cap.id})" 
        class="p-5 bg-indigo-100 rounded-xl shadow hover:bg-indigo-200 cursor-pointer">
        <h3 class="font-bold text-lg">${cap.title}</h3>
        <p class="text-sm text-indigo-700 mt-1">
  Nota: <b>${obtenerNotaMatematicas(cap.id)}</b>
</p>

      </div>`;
  });
}

function abrirCapitulo(id) {
  capituloActual = cursoActual[id];

  document.getElementById("curso").classList.add("hidden");
  document.getElementById("capitulo").classList.remove("hidden");

  document.getElementById("tituloCapitulo").innerHTML = capituloActual.title;
  document.getElementById("contenidoCapitulo").innerHTML = capituloActual.theory;

  document.getElementById("prueba").classList.add("hidden");
  document.getElementById("resultado").innerHTML = "";

  let progreso = getProgressMatematicas();
  if (!progreso.completed.includes(id)) {
    progreso.completed.push(id);
    saveProgressMatematicas(progreso);
    actualizarBarraProgreso();
  }
}


function mostrarPrueba() {
  let q = capituloActual.questions;
  let quiz = document.getElementById("quiz");
  quiz.innerHTML = "";

  document.getElementById("prueba").classList.remove("hidden");

  q.forEach((p, i) => {
    quiz.innerHTML += `
      <div class="mb-4">
        <p class="font-semibold">${p.q}</p>
        ${p.a.map((opt, j) => `
          <label class="block">
            <input type="radio" name="p${i}" value="${j}"> ${opt}
          </label>
        `).join("")}
      </div>`;
  });
}


function finalizarPrueba() {
  let q = capituloActual.questions;
  let score = 0;

  q.forEach((p, i) => {
    let ans = document.querySelector(`input[name="p${i}"]:checked`);
    if (ans && parseInt(ans.value) === p.correct) score++;
  });

  document.getElementById("resultado").innerHTML =
    `Resultado: <b>${score}/${q.length}</b>`;
    // Guardar la nota del cap√≠tulo
saveNotaMatematicas(capituloActual.id, score, q.length);

}

function getProgressMatematicas() {
  let data = localStorage.getItem("progresoMatematicas");
  if (!data) return { completed: [] };
  return JSON.parse(data);
}

function saveProgressMatematicas(progress) {
  localStorage.setItem("progresoMatematicas", JSON.stringify(progress));
}

function actualizarBarraProgreso() {
  let progreso = getProgressMatematicas();
  let total = matematicas.length;
  let completados = progreso.completed.length;

  let porcentaje = Math.round((completados / total) * 100);

  document.getElementById("progressText").innerText = porcentaje + "%";
  document.getElementById("progressBar").style.width = porcentaje + "%";
}

function terminarCapitulo() {
  let progreso = getProgressMatematicas();
  if (!progreso.completed.includes(capituloActual.id)) {
    progreso.completed.push(capituloActual.id);
    saveProgressMatematicas(progreso);
  }

  actualizarBarraProgreso();

  document.getElementById("capitulo").classList.add("hidden");
  document.getElementById("curso").classList.remove("hidden");
}

function volverMenu() {
  document.getElementById("curso").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function volverCurso() {
  document.getElementById("capitulo").classList.add("hidden");
  document.getElementById("curso").classList.remove("hidden");
}

function volverLogica() {
  window.location.href = "https://thepiruyf7-dotcom.github.io/pagina-PMA-dvirtual.github.io/";
}
/* ============================================================
   SISTEMA DE NOTAS (Guardar, obtener, mostrar)
============================================================ */

function getNotasMatematicas() {
  let data = localStorage.getItem("notasMatematicas");
  if (!data) return {};  
  return JSON.parse(data);
}

function saveNotaMatematicas(id, score, total) {
  let notas = getNotasMatematicas();
  notas[id] = `${score}/${total}`;
  localStorage.setItem("notasMatematicas", JSON.stringify(notas));
}

function obtenerNotaMatematicas(id) {
  let notas = getNotasMatematicas();
  return notas[id] ? notas[id] : "‚Äî";
}

</script>

</body>
</html>
